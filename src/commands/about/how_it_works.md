:question: **How does Intersection work?**

Intersection is a suite of delicately hand-crafted software that all works together to provide the end result which is the Intersection Discord bot.

You can see what version of Intersection that is currently running by looking at the result of {cmd_version}!

Intersection contains a few core components, namely the Discord bot itself and the DRQL logic. The Discord bot is written in [Rust](https://www.rust-lang.org/) using the [Serenity](https://crates.io/crates/serenity) and [Poise](https://crates.io/crates/poise) frameworks, and the DRQL logic is broken into a few pieces:

-   DRQL frontend (parsing): lexer generated by [Logos](https://crates.io/crates/logos) and LR(1) parser generated by [LALRPOP](https://crates.io/crates/lalrpop)
-   DRQL backend: Completely hand-made!

You can see what version of all of those primary dependencies that was used by running the version command listed above.

## DRQL queries

When you run a DRQL query, your query is passed through the DRQL parser and an Abstract Syntax Tree is generated. This tree directly represents the query you wrote, and you can actually view the tree generated with the {cmd_debug_parse_one} command!

Values within this tree are then resolved to Sets where the result is calculated.

Then one of the most complicated steps of Intersection occurs: optimization. Discord servers already have roles, and instead of mentioning 10,000 different people, why not take advantage of that? Intersection takes a best-effort attempt at representing the result set as the union of a bunch of roles within your server and mentioning them instead. There will always be flaws here, and outliers will exist in most cases.

## Contributing

Intersection is currently closed-source software. I plan to go open-source very soon, stay tuned! If you're still interested, please reach out so we can see how your skills can benefit the Project!
